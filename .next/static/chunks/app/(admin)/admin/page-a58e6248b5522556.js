(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5150],{3960:function(e,t,s){Promise.resolve().then(s.bind(s,4185))},4185:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var r=s(3890),a=s(8496),n=s(376),i=s(9083),l=s(6788),c=s(2050),d=s(7063),o=s(1520),u=s(8254),x=s(3943);let m=(0,s(331).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var h=s(9931),f=s(7945);function j(){let{isAuthenticated:e}=(0,f.J)(),[t,s]=(0,a.useState)(null),[j,p]=(0,a.useState)(!0),[g,y]=(0,a.useState)(null);return((0,a.useEffect)(()=>{let t=async()=>{try{p(!0),y(null);let[e,t,r]=await Promise.all([fetch("/api/products?limit=10000"),fetch("/api/orders"),fetch("/api/inquiries")]);if(!e.ok){let t=await e.json().catch(()=>({error:"Failed to fetch products"}));throw Error(t.error||"Failed to fetch products")}if(!t.ok){let e=await t.json().catch(()=>({error:"Failed to fetch orders"}));throw Error(e.error||"Failed to fetch orders")}if(!r.ok){let e=await r.json().catch(()=>({error:"Failed to fetch inquiries"}));throw Error(e.error||"Failed to fetch inquiries")}let a=await e.json(),n=await t.json(),i=await r.json(),l=Array.isArray(a)?a:a.products||[],c=Array.isArray(n)?n.filter(e=>"pending"===e.status).length:0,d=Array.isArray(i)?i.filter(e=>!e.read||!e.responded).length:0,o=Array.isArray(n)?n:[],u=Array.isArray(i)?i:[],x=o.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).slice(0,5),m=u.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).slice(0,5);s({totalProducts:l.length,totalOrders:o.length,totalInquiries:u.length,pendingOrders:c,pendingInquiries:d,recentOrders:x,recentInquiries:m})}catch(e){console.error("Failed to fetch stats:",e),y(e instanceof Error?e.message:"Failed to load dashboard data. Please refresh the page or try again later.")}finally{p(!1)}};e&&t()},[e]),j)?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):g&&!t?(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsxs)("div",{className:"p-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md max-w-md mx-auto",children:[g,(0,r.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),className:"mt-4",children:"Retry"})]})}):t?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Welcome to the admin panel"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(n.ll,{className:"text-sm font-medium",children:"Total Products"}),(0,r.jsx)(c.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(n.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t.totalProducts}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active products"})]})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(n.ll,{className:"text-sm font-medium",children:"Total Orders"}),(0,r.jsx)(d.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(n.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t.totalOrders}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[t.pendingOrders," pending"]})]})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(n.ll,{className:"text-sm font-medium",children:"Total Inquiries"}),(0,r.jsx)(o.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(n.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t.totalInquiries}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[t.pendingInquiries," unread"]})]})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(n.ll,{className:"text-sm font-medium",children:"Pending Actions"}),(0,r.jsx)(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(n.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t.pendingOrders+t.pendingInquiries}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Requires attention"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{children:[(0,r.jsx)(n.ll,{children:"Quick Actions"}),(0,r.jsx)(n.SZ,{children:"Common admin tasks"})]}),(0,r.jsxs)(n.aY,{className:"space-y-2",children:[(0,r.jsx)(l.default,{href:"/admin/products",children:(0,r.jsxs)(i.z,{variant:"outline",className:"w-full justify-start",children:[(0,r.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Manage Products",(0,r.jsx)(x.Z,{className:"h-4 w-4 ml-auto"})]})}),(0,r.jsx)(l.default,{href:"/admin/orders",children:(0,r.jsxs)(i.z,{variant:"outline",className:"w-full justify-start",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"View Orders",(0,r.jsx)(x.Z,{className:"h-4 w-4 ml-auto"})]})}),(0,r.jsx)(l.default,{href:"/admin/inquiries",children:(0,r.jsxs)(i.z,{variant:"outline",className:"w-full justify-start",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"View Inquiries",(0,r.jsx)(x.Z,{className:"h-4 w-4 ml-auto"})]})})]})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{children:[(0,r.jsx)(n.ll,{children:"Recent Orders"}),(0,r.jsx)(n.SZ,{children:"Latest 5 orders"})]}),(0,r.jsxs)(n.aY,{children:[0===t.recentOrders.length?(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"No orders yet"}):(0,r.jsx)("div",{className:"space-y-3",children:t.recentOrders.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:e.companyName||"N/A"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:["pending"===e.status?(0,r.jsx)(u.Z,{className:"h-4 w-4 text-yellow-500"}):"approved"===e.status?(0,r.jsx)(m,{className:"h-4 w-4 text-green-500"}):(0,r.jsx)(h.Z,{className:"h-4 w-4 text-red-500"}),(0,r.jsx)("span",{className:"text-xs capitalize",children:e.status})]})]},e.id))}),(0,r.jsx)(l.default,{href:"/admin/orders",children:(0,r.jsxs)(i.z,{variant:"ghost",className:"w-full mt-4",size:"sm",children:["View All Orders",(0,r.jsx)(x.Z,{className:"h-4 w-4 ml-2"})]})})]})]}),(0,r.jsxs)(n.Zb,{children:[(0,r.jsxs)(n.Ol,{children:[(0,r.jsx)(n.ll,{children:"Recent Inquiries"}),(0,r.jsx)(n.SZ,{children:"Latest 5 inquiries"})]}),(0,r.jsxs)(n.aY,{children:[0===t.recentInquiries.length?(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"No inquiries yet"}):(0,r.jsx)("div",{className:"space-y-3",children:t.recentInquiries.map(e=>{var t;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:e.name||e.email}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 truncate",children:[(null===(t=e.message)||void 0===t?void 0:t.substring(0,30))||"No message","..."]})]}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:!e.read&&(0,r.jsx)("span",{className:"h-2 w-2 bg-blue-500 rounded-full"})})]},e.id)})}),(0,r.jsx)(l.default,{href:"/admin/inquiries",children:(0,r.jsxs)(i.z,{variant:"ghost",className:"w-full mt-4",size:"sm",children:["View All Inquiries",(0,r.jsx)(x.Z,{className:"h-4 w-4 ml-2"})]})})]})]})]})]}):(0,r.jsx)("div",{className:"text-center py-8",children:"Loading dashboard data..."})}},9083:function(e,t,s){"use strict";s.d(t,{d:function(){return c},z:function(){return d}});var r=s(3890),a=s(8496),n=s(4241),i=s(8898),l=s(1597);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:d=!1,...o}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(c({variant:a,size:i,className:s})),ref:t,...o})});d.displayName="Button"},376:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},eW:function(){return u},ll:function(){return c}});var r=s(3890),a=s(8496),n=s(1597);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});l.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});o.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},1597:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(2675),a=s(10);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}},3943:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(331).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},9931:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(331).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},8254:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(331).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1520:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(331).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},2050:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(331).Z)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},7063:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(331).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},6788:function(e,t,s){"use strict";s.d(t,{default:function(){return a.a}});var r=s(9498),a=s.n(r)},7945:function(e,t,s){"use strict";s.d(t,{J:function(){return n}});var r=s(6968),a=s(461);let n=(0,r.U)()((0,a.tJ)((e,t)=>({user:null,isAuthenticated:!1,login:t=>{e({user:t,isAuthenticated:!0})},logout:()=>{e({user:null,isAuthenticated:!1})},verifyToken:async()=>{try{let{apiClient:r}=await s.e(3114).then(s.bind(s,3114)),a=await r.post("/api/admin/auth/verify");if(a.valid)return e({user:a.user,isAuthenticated:!0}),!0;return t().logout(),!1}catch(e){return t().logout(),!1}}}),{name:"admin-auth-storage",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated})}))}},function(e){e.O(0,[8741,5669,9498,9649,2945,1744],function(){return e(e.s=3960)}),_N_E=e.O()}]);