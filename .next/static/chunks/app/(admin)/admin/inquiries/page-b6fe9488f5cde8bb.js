(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4451],{4081:function(e,t,a){Promise.resolve().then(a.bind(a,6134))},6134:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var r=a(3890),s=a(8496),n=a(7945),i=a(376),d=a(9083),l=a(1015),c=a(401),o=a(8698),u=a(9412),f=a(8756),m=a(4186),x=a(5842),h=a(8830),p=a(1520),j=a(9931);function y(){let{isAuthenticated:e}=(0,n.J)(),[t,a]=(0,s.useState)([]),[y,g]=(0,s.useState)([]),[N,b]=(0,s.useState)(!0),[v,w]=(0,s.useState)(null),[C,k]=(0,s.useState)(!1),[R,q]=(0,s.useState)("all");(0,s.useEffect)(()=>{e&&z()},[e]),(0,s.useEffect)(()=>{let e=t;switch(R){case"unread":e=t.filter(e=>!e.read);break;case"read":e=t.filter(e=>e.read&&!e.responded);break;case"responded":e=t.filter(e=>e.responded);break;default:e=t}g(e)},[R,t]);let z=async()=>{try{let e=await fetch("".concat("","/api/inquiries"));if(!e.ok)throw Error("Failed to fetch inquiries");let t=await e.json();a(t),g(t)}catch(e){console.error("Failed to fetch inquiries:",e)}finally{b(!1)}},S=async(t,a)=>{if(e)try{if(!(await fetch("".concat("","/api/inquiries/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({read:a})})).ok)throw Error("Failed to update inquiry");z(),(null==v?void 0:v.id)===t&&w({...v,read:a})}catch(e){console.error("Failed to update inquiry:",e),alert("Failed to update inquiry")}},A=async(t,a)=>{if(e)try{if(!(await fetch("".concat("","/api/inquiries/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({responded:a})})).ok)throw Error("Failed to update inquiry");z(),(null==v?void 0:v.id)===t&&w({...v,responded:a})}catch(e){console.error("Failed to update inquiry:",e),alert("Failed to update inquiry")}},D=async t=>{if(e&&confirm("Are you sure you want to delete this inquiry?"))try{if(!(await fetch("".concat("","/api/inquiries/").concat(t),{method:"DELETE"})).ok)throw Error("Failed to delete inquiry");z(),(null==v?void 0:v.id)===t&&k(!1)}catch(e){console.error("Failed to delete inquiry:",e),alert("Failed to delete inquiry")}},E=e=>{w(e),k(!0),e.read||S(e.id,!0)};return N?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Inquiries"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage customer inquiries"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)(d.z,{variant:"outline",onClick:()=>{let e=new Blob([["ID,Name,Email,Phone,Company,Message,Read,Responded,Created At",...t.map(e=>[e.id,e.name,e.email,e.phone,e.company,e.message.replace(/,/g,";"),e.read?"Yes":"No",e.responded?"Yes":"No",new Date(e.createdAt).toLocaleString()]).map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),r=URL.createObjectURL(e);a.setAttribute("href",r),a.setAttribute("download","inquiries-".concat(new Date().toISOString().split("T")[0],".csv")),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(d.z,{variant:"all"===R?"default":"outline",size:"sm",onClick:()=>q("all"),children:"All"}),(0,r.jsx)(d.z,{variant:"unread"===R?"default":"outline",size:"sm",onClick:()=>q("unread"),children:"Unread"}),(0,r.jsx)(d.z,{variant:"read"===R?"default":"outline",size:"sm",onClick:()=>q("read"),children:"Read"}),(0,r.jsx)(d.z,{variant:"responded"===R?"default":"outline",size:"sm",onClick:()=>q("responded"),children:"Responded"})]})]})]}),(0,r.jsx)(i.Zb,{children:(0,r.jsx)(i.aY,{className:"p-0",children:(0,r.jsxs)(l.iA,{children:[(0,r.jsx)(l.xD,{children:(0,r.jsxs)(l.SC,{children:[(0,r.jsx)(l.ss,{children:"Name"}),(0,r.jsx)(l.ss,{children:"Email"}),(0,r.jsx)(l.ss,{children:"Company"}),(0,r.jsx)(l.ss,{children:"Message"}),(0,r.jsx)(l.ss,{children:"Status"}),(0,r.jsx)(l.ss,{children:"Date"}),(0,r.jsx)(l.ss,{className:"text-right",children:"Actions"})]})}),(0,r.jsx)(l.RM,{children:0===y.length?(0,r.jsx)(l.SC,{children:(0,r.jsx)(l.pj,{colSpan:7,className:"text-center py-8 text-gray-500",children:"No inquiries found"})}):y.map(e=>(0,r.jsxs)(l.SC,{children:[(0,r.jsx)(l.pj,{className:"font-medium",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[!e.read&&(0,r.jsx)("span",{className:"h-2 w-2 bg-blue-500 rounded-full"}),(0,r.jsx)("span",{children:e.name})]})}),(0,r.jsx)(l.pj,{children:e.email}),(0,r.jsx)(l.pj,{children:e.company}),(0,r.jsxs)(l.pj,{className:"max-w-xs truncate",children:[e.message.substring(0,50),"..."]}),(0,r.jsx)(l.pj,{children:(0,r.jsx)("div",{className:"flex items-center space-x-2",children:e.responded?(0,r.jsxs)(o.C,{variant:"default",className:"bg-green-500",children:[(0,r.jsx)(x.Z,{className:"h-3 w-3 mr-1"}),"Responded"]}):e.read?(0,r.jsx)(o.C,{variant:"secondary",children:"Read"}):(0,r.jsx)(o.C,{variant:"outline",children:"Unread"})})}),(0,r.jsx)(l.pj,{children:new Date(e.createdAt).toLocaleDateString()}),(0,r.jsx)(l.pj,{className:"text-right",children:(0,r.jsx)(d.z,{variant:"ghost",size:"icon",onClick:()=>E(e),children:(0,r.jsx)(h.Z,{className:"h-4 w-4"})})})]},e.id))})]})})}),(0,r.jsx)(c.Vq,{open:C,onOpenChange:k,children:(0,r.jsxs)(c.cZ,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)(c.fK,{children:[(0,r.jsx)(c.$N,{children:"Inquiry Details"}),(0,r.jsx)(c.Be,{children:"View and manage inquiry information"})]}),v&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold mb-2",children:"Contact Information"}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Name:"})," ",(0,r.jsx)("span",{className:"font-medium",children:v.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Email:"})," ",(0,r.jsx)("a",{href:"mailto:".concat(v.email),className:"text-primary hover:underline",children:v.email})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Phone:"})," ",(0,r.jsx)("a",{href:"tel:".concat(v.phone),className:"text-primary hover:underline",children:v.phone})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Company:"})," ",(0,r.jsx)("span",{className:"font-medium",children:v.company})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold mb-2",children:"Inquiry Information"}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Inquiry ID:"})," ",(0,r.jsx)("span",{className:"font-medium",children:v.id})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Created:"})," ",new Date(v.createdAt).toLocaleString()]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Updated:"})," ",new Date(v.updatedAt).toLocaleString()]}),v.meetingRequest&&(0,r.jsx)("div",{children:(0,r.jsx)(o.C,{variant:"secondary",children:"Meeting Requested"})})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold mb-2",children:"Message"}),(0,r.jsx)("p",{className:"text-sm text-gray-700 bg-gray-50 p-4 rounded whitespace-pre-wrap",children:v.message})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(u.X,{id:"read",checked:v.read,onCheckedChange:e=>S(v.id,e)}),(0,r.jsx)(f._,{htmlFor:"read",className:"cursor-pointer",children:"Mark as read"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(u.X,{id:"responded",checked:v.responded,onCheckedChange:e=>A(v.id,e)}),(0,r.jsx)(f._,{htmlFor:"responded",className:"cursor-pointer",children:"Mark as responded"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)(d.z,{variant:"outline",onClick:()=>{window.location.href="mailto:".concat(v.email,"?subject=Re: Your Inquiry")},children:[(0,r.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Reply"]}),(0,r.jsxs)(d.z,{variant:"destructive",onClick:()=>D(v.id),children:[(0,r.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]})})]})}},8698:function(e,t,a){"use strict";a.d(t,{C:function(){return d}});var r=a(3890);a(8496);var s=a(8898),n=a(1597);let i=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:a}),t),...s})}},9083:function(e,t,a){"use strict";a.d(t,{d:function(){return l},z:function(){return c}});var r=a(3890),s=a(8496),n=a(4241),i=a(8898),d=a(1597);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,asChild:c=!1,...o}=e,u=c?n.g7:"button";return(0,r.jsx)(u,{className:(0,d.cn)(l({variant:s,size:i,className:a})),ref:t,...o})});c.displayName="Button"},376:function(e,t,a){"use strict";a.d(t,{Ol:function(){return d},SZ:function(){return c},Zb:function(){return i},aY:function(){return o},eW:function(){return u},ll:function(){return l}});var r=a(3890),s=a(8496),n=a(1597);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});i.displayName="Card";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});d.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});l.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});c.displayName="CardDescription";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});o.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},9412:function(e,t,a){"use strict";a.d(t,{X:function(){return l}});var r=a(3890),s=a(8496),n=a(7914),i=a(2405),d=a(1597);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.fC,{ref:t,className:(0,d.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...s,children:(0,r.jsx)(n.z$,{className:(0,d.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})})});l.displayName=n.fC.displayName},401:function(e,t,a){"use strict";a.d(t,{$N:function(){return m},Be:function(){return x},Vq:function(){return l},cZ:function(){return u},fK:function(){return f}});var r=a(3890),s=a(8496),n=a(9444),i=a(8354),d=a(1597);let l=n.fC;n.xz;let c=n.h_;n.x8;let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.aV,{ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});o.displayName=n.aV.displayName;let u=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(o,{}),(0,r.jsxs)(n.VY,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l,children:[s,(0,r.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.VY.displayName;let f=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};f.displayName="DialogHeader";let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.Dx,{ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});m.displayName=n.Dx.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.dk,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",a),...s})});x.displayName=n.dk.displayName},8756:function(e,t,a){"use strict";a.d(t,{_:function(){return c}});var r=a(3890),s=a(8496),n=a(5374),i=a(8898),d=a(1597);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.f,{ref:t,className:(0,d.cn)(l(),a),...s})});c.displayName=n.f.displayName},1015:function(e,t,a){"use strict";a.d(t,{RM:function(){return l},SC:function(){return c},iA:function(){return i},pj:function(){return u},ss:function(){return o},xD:function(){return d}});var r=a(3890),s=a(8496),n=a(1597);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",a),...s})})});i.displayName="Table";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",a),...s})});d.displayName="TableHeader";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...s})});l.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});c.displayName="TableRow";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,n.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});o.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,n.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...s})}).displayName="TableCaption"},1597:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var r=a(2675),s=a(10);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}},7945:function(e,t,a){"use strict";a.d(t,{J:function(){return n}});var r=a(6968),s=a(461);let n=(0,r.U)()((0,s.tJ)((e,t)=>({user:null,isAuthenticated:!1,login:t=>{e({user:t,isAuthenticated:!0})},logout:()=>{e({user:null,isAuthenticated:!1})},verifyToken:async()=>{try{let{apiClient:r}=await a.e(3114).then(a.bind(a,3114)),s=await r.post("/api/admin/auth/verify");if(s.valid)return e({user:s.user,isAuthenticated:!0}),!0;return t().logout(),!1}catch(e){return t().logout(),!1}}}),{name:"admin-auth-storage",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated})}))}},function(e){e.O(0,[8741,5669,396,3512,9649,2945,1744],function(){return e(e.s=4081)}),_N_E=e.O()}]);