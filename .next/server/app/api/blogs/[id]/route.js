"use strict";(()=>{var e={};e.id=536,e.ids=[536],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},76162:e=>{e.exports=require("stream")},21764:e=>{e.exports=require("util")},8678:e=>{e.exports=import("pg")},49492:(e,r,t)=>{t.a(e,async(e,o)=>{try{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>p,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l});var n=t(12085),s=t(31650),i=t(85980),a=t(34939),u=e([a]);a=(u.then?(await u)():u)[0];let c=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/blogs/[id]/route",pathname:"/api/blogs/[id]",filename:"route",bundlePath:"app/api/blogs/[id]/route"},resolvedPagePath:"/home/stark/leiindias/app/api/blogs/[id]/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:h}=c,g="/api/blogs/[id]/route";function p(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}o()}catch(e){o(e)}})},34939:(e,r,t)=>{t.a(e,async(e,o)=>{try{t.r(r),t.d(r,{GET:()=>u});var n=t(30627),s=t(83136),i=t(17261),a=e([s]);async function u(e,{params:r}){try{let t=(await s.w.query(`
      SELECT id, title, excerpt, content, author, category, image, published,
             "publishedAt", "createdAt", "updatedAt"
      FROM "Blog"
      WHERE id = $1
      LIMIT 1
      `,[r.id])).rows[0];if(!t)return n.NextResponse.json({error:"Blog not found"},{status:404});let o=e.headers.get("authorization");if(!t.published){if(!o||!o.startsWith("Bearer "))return n.NextResponse.json({error:"Blog not found"},{status:404});let e=o.substring(7),r=(0,i.W)(e);if(!r||"admin"!==r.role&&"superadmin"!==r.role)return n.NextResponse.json({error:"Blog not found"},{status:404})}return n.NextResponse.json(t)}catch(e){return console.error("Failed to fetch blog:",e),n.NextResponse.json({error:"Failed to fetch blog"},{status:500})}}s=(a.then?(await a)():a)[0],o()}catch(e){o(e)}})},17261:(e,r,t)=>{t.d(r,{R:()=>a,W:()=>u});var o=t(57946),n=t.n(o);let s=process.env.JWT_SECRET||"",i=process.env.JWT_EXPIRES_IN||"7d";if(!s)throw Error("JWT_SECRET environment variable must be set in production");function a(e,r="customer"){if(!s)throw Error("JWT_SECRET is not configured");return n().sign({username:e,role:r},s,{expiresIn:i})}function u(e){try{if(!s)return null;return n().verify(e,s)}catch{return null}}},83136:(e,r,t)=>{t.a(e,async(e,o)=>{try{t.d(r,{w:()=>i});var n=t(8678),s=e([n]);if(n=(s.then?(await s)():s)[0],!process.env.DATABASE_URL)throw Error("DATABASE_URL must be set for Postgres connections");let i=new n.Pool({connectionString:process.env.DATABASE_URL,ssl:{rejectUnauthorized:!1}});o()}catch(e){o(e)}})}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[6522,8247,7946],()=>t(49492));module.exports=o})();